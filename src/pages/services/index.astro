---
import { SITE } from "@config";
import Layout from "@layouts/Layout.astro";
import DocsHeader from "@components/DocsHeader.astro";
import Footer from "@components/Footer.astro";
import ServiceCard from "@components/ServiceCard.astro";
import { getCollection } from "astro:content";

const services = await getCollection("services");
const sortedServices = services.sort((a, b) => a.data.order - b.data.order);
---

<Layout
  title={`Services | ${SITE.title}`}
  description="Book expert consultations, technical support, and code reviews."
>
  <DocsHeader activeNav="services" />

  <main id="main-content" class="services-main">
    <div class="services-container">
      <header class="services-header">
        <h1 class="services-title">Our Services</h1>
        <p class="services-description">
          Get expert guidance for your projects. Choose the service that best
          fits your needs and book a session with our specialists.
        </p>
      </header>

      <div class="services-grid">
        {
          sortedServices.map(service => (
            <ServiceCard
              title={service.data.title}
              description={service.data.description}
              price={service.data.price}
              duration={service.data.duration}
              priceType={service.data.priceType}
              features={service.data.features}
              bookingUrl={service.data.bookingUrl}
              highlighted={service.data.highlighted}
            />
          ))
        }
      </div>

      <section class="services-info">
        <h2>How It Works</h2>
        <div class="steps-grid">
          <div class="step">
            <div class="step-number">1</div>
            <h3>Choose a Service</h3>
            <p>
              Select the service that matches your needs - consultation,
              technical support, or code review.
            </p>
          </div>
          <div class="step">
            <div class="step-number">2</div>
            <h3>Book a Time</h3>
            <p>
              Pick a convenient time slot from our calendar. You'll receive a
              confirmation email with meeting details.
            </p>
          </div>
          <div class="step">
            <div class="step-number">3</div>
            <h3>Join Your Session</h3>
            <p>
              Connect via video call at your scheduled time. Come prepared with
              your questions and materials.
            </p>
          </div>
          <div class="step">
            <div class="step-number">4</div>
            <h3>Get Results</h3>
            <p>
              Walk away with actionable insights, solutions, and follow-up
              resources to keep you moving forward.
            </p>
          </div>
        </div>
      </section>

      <section class="faq-section">
        <h2>Frequently Asked Questions</h2>
        <div class="faq-grid">
          <div class="faq-item">
            <h3>What if I need to reschedule?</h3>
            <p>
              You can reschedule up to 24 hours before your session at no
              charge. Contact us via email or use the reschedule link in your
              confirmation.
            </p>
          </div>
          <div class="faq-item">
            <h3>How are sessions conducted?</h3>
            <p>
              All sessions are via video call using Zoom or Google Meet. You'll
              receive a link in your confirmation email.
            </p>
          </div>
          <div class="faq-item">
            <h3>Do you offer packages?</h3>
            <p>
              Yes! We offer discounts for bulk bookings: 10% off for 5 hours,
              15% off for 10+ hours. Contact us for custom packages.
            </p>
          </div>
          <div class="faq-item">
            <h3>What's your refund policy?</h3>
            <p>
              Full refund for cancellations 48+ hours in advance, 50% for 24-48
              hours. No refunds for less than 24 hours notice.
            </p>
          </div>
        </div>
      </section>

      <section class="cta-section">
        <h2>Ready to Get Started?</h2>
        <p>
          Have questions about which service is right for you? Check our
          documentation or contact us directly.
        </p>
        <div class="cta-buttons">
          <a href="/docs/" class="cta-secondary">Browse Documentation</a>
          <a href="/services/" class="cta-primary">Contact Us</a>
        </div>
      </section>
    </div>
  </main>

  <Footer />
</Layout>

<style>
  .services-main {
    @apply min-h-screen pt-16;
  }

  .services-container {
    @apply mx-auto max-w-6xl px-4 py-12 lg:px-8;
  }

  .services-header {
    @apply mb-16 text-center;
  }

  .services-title {
    @apply mb-4 text-4xl font-bold text-skin-base sm:text-5xl;
  }

  .services-description {
    @apply mx-auto max-w-2xl text-lg text-skin-base opacity-80;
  }

  .services-grid {
    @apply mx-auto grid max-w-5xl gap-8 md:grid-cols-3;
  }

  .services-info {
    @apply mt-24;
  }

  .services-info h2 {
    @apply mb-8 text-center text-3xl font-bold text-skin-base;
  }

  .steps-grid {
    @apply grid gap-8 sm:grid-cols-2 lg:grid-cols-4;
  }

  .step {
    @apply text-center;
  }

  .step-number {
    @apply mx-auto mb-4 flex h-12 w-12 items-center justify-center
           rounded-full bg-skin-accent text-xl font-bold text-skin-inverted;
  }

  .step h3 {
    @apply mb-2 font-semibold text-skin-base;
  }

  .step p {
    @apply text-sm text-skin-base opacity-70;
  }

  .faq-section {
    @apply mt-24;
  }

  .faq-section h2 {
    @apply mb-8 text-center text-3xl font-bold text-skin-base;
  }

  .faq-grid {
    @apply grid gap-6 sm:grid-cols-2;
  }

  .faq-item {
    @apply rounded-lg border border-skin-line p-6;
  }

  .faq-item h3 {
    @apply mb-2 font-semibold text-skin-base;
  }

  .faq-item p {
    @apply text-sm text-skin-base opacity-70;
  }

  .cta-section {
    @apply mt-24 rounded-2xl bg-skin-card p-8 text-center sm:p-12;
  }

  .cta-section h2 {
    @apply mb-4 text-2xl font-bold text-skin-base sm:text-3xl;
  }

  .cta-section > p {
    @apply mx-auto mb-8 max-w-xl text-skin-base opacity-80;
  }

  .cta-buttons {
    @apply flex flex-col justify-center gap-4 sm:flex-row;
  }

  .cta-primary {
    @apply rounded-lg bg-skin-accent px-8 py-3 font-semibold
           text-skin-inverted transition-opacity hover:opacity-90;
  }

  .cta-secondary {
    @apply rounded-lg border border-skin-line px-8 py-3 font-semibold
           text-skin-base transition-colors hover:bg-skin-card;
  }
</style>
